---
// src/components/home/CompanyBrief.astro

const briefData = {
    titleLine1: "Nuestra Esencia",
    titleLine2: "Constructiva",
    yearsOfExperience: "15", 
    bulletPoints: [
        "Expertos en obra civil, remodelación y gestión",
        "Comprometidos con la comunidad, construimos desde valores que unen y perduran",
        "Compromiso con la sostenibilidad y la innovación"
    ],
    ctaText: "Conoce más sobre LAYCE",
    ctaLink: "/nosotros",
    teamImage: {
        src: "https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80", 
        alt: "Equipo de LAYCE Construcciones colaborando en un proyecto"
    },
    introParagraph: ""
};
briefData.introParagraph = `Con más de 15 años en el sector, combinamos experiencia, innovación y valores sólidos para crear obras que trascienden y transforman comunidades.`;
const experienceBullet = `+${briefData.yearsOfExperience} años de experiencia transformando ideas en realidad.`;
const allBulletPoints = [experienceBullet, ...briefData.bulletPoints];
---

<section class="py-16 md:py-24 bg-lightGray overflow-hidden">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="lg:grid lg:grid-cols-12 lg:gap-x-12 xl:gap-x-16 items-center">
            
            {/* Columna Izquierda: Imagen y Decoración Azul */}
            <div class="lg:col-span-5 relative mb-12 lg:mb-0">
                {/* Contenedor B: para imagen y figuras. Controla el padding para el "marco" en desktop */}
                <div class="relative mx-auto max-w-md animate-slide-in-left scroll-animate
                            pt-6 sm:pt-8 md:pt-10 
                            lg:max-w-none lg:mx-0 lg:pt-12 xl:lg:pt-16 lg:pl-8 xl:lg:pl-12"> {/* Ajustado padding para desktop */}
                    
                    {/* Figura 1 (Fondo-Capa en móvil, se convierte en BARRA SUPERIOR del marco en Desktop) */}
                    <div class:list={[
                        "absolute rounded-xl bg-primary z-0",
                        // Estilos Móvil: capa desfasada inferior
                        "w-full h-full top-2 left-2 opacity-70",
                        // Estilos Desktop: barra superior del marco
                        "lg:w-[calc(100%-2rem)] xl:lg:w-[calc(100%-3rem)] lg:h-24 xl:lg:h-32", // Ancho relativo al padding, alto fijo
                        "lg:top-0 lg:left-0 lg:opacity-100",
                        "lg:transform-none" // Resetea cualquier transform de móvil
                    ]} aria-hidden="true"></div>
                    
                    {/* Figura 2 (Fondo-Capa en móvil, se convierte en BARRA LATERAL IZQ del marco en Desktop CON DEGRADADO) */}
                    <div class:list={[
                        "absolute rounded-xl z-10",
                        // Estilos Móvil: capa desfasada superior, color sólido
                        "w-full h-full -top-1 -left-1 bg-primary",
                        // Estilos Desktop: barra lateral izquierda del marco, con degradado
                        "lg:w-24 xl:lg:w-32 lg:h-[calc(100%-2rem)] xl:lg:h-[calc(100%-3rem)]", // Ancho fijo, alto relativo al padding
                        "lg:top-0 lg:left-0",
                        "lg:bg-gradient-to-r lg:from-primary lg:to-primary/60", // Degradado para desktop
                        "lg:transform-none" // Resetea cualquier transform de móvil
                    ]} aria-hidden="true"></div>

                    {/* Imagen */}
                    <div class="relative z-20">
                        <img 
                            src={briefData.teamImage.src} 
                            alt={briefData.teamImage.alt} 
                            class="rounded-xl shadow-2xl w-full aspect-[4/3] object-cover"
                            loading="lazy"
                            width="800" height="600" 
                        />
                    </div>
                </div>
            </div>

            {/* Columna Derecha: Texto (sin cambios significativos) */}
            <div class="lg:col-span-7 text-center lg:text-left">
                <h2 class="text-3xl md:text-4xl lg:text-[2.8rem] xl:text-5xl font-semibold text-neutralText balance-text leading-tight">
                    <span class="block animate-brief-title1 scroll-animate">{briefData.titleLine1}</span>
                    <span class="block text-primary mt-1 md:mt-2 animate-brief-title2 scroll-animate">{briefData.titleLine2}</span>
                </h2>
                <p class="mt-6 text-lg md:text-xl text-neutralText/90 balance-text leading-relaxed animate-brief-intro scroll-animate">
                    {briefData.introParagraph}
                </p>
                <ul class="mt-8 space-y-4 text-left text-neutralText/90 text-base md:text-lg max-w-xl mx-auto lg:mx-0">
                    {allBulletPoints.map(point => (
                        <li class="flex items-start animate-brief-bullet scroll-animate">
                            <svg class="flex-shrink-0 h-6 w-6 text-primary mr-3 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                            <span class="leading-relaxed">{point}</span>
                        </li>
                    ))}
                </ul>
                <div class="mt-10 animate-brief-cta scroll-animate">
                    <a 
                        href={briefData.ctaLink} 
                        class="inline-flex items-center text-primary font-medium group text-lg hover:text-secondary transition-colors duration-300"
                    >
                        {briefData.ctaText}
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 ml-2 transition-transform duration-300 group-hover:translate-x-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .balance-text {
        text-wrap: balance;
    }

    @keyframes slideInLeftFade {
        /* 0% handled by base class */
        100% {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes slideInFadeUpBrief { 
        /* 0% handled by base class */
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInSimple {
        /* 0% handled by base class */
        100% {
            opacity: 1;
        }
    }

    .animate-slide-in-left {
        opacity: 0;
        transform: translateX(-50px);
    }
    .animate-slide-in-left.is-visible {
        animation-name: slideInLeftFade;
        animation-duration: 0.8s;
        animation-timing-function: ease-out;
        animation-fill-mode: forwards;
    }

    .animate-brief-title1 {
        opacity: 0;
        transform: translateY(30px);
    }
    .animate-brief-title1.is-visible {
        animation-name: slideInFadeUpBrief;
        animation-duration: 0.6s;
        animation-timing-function: ease-out;
        animation-delay: 0.2s; 
        animation-fill-mode: forwards;
    }

    .animate-brief-title2 {
        opacity: 0;
        transform: translateY(30px);
    }
    .animate-brief-title2.is-visible {
        animation-name: slideInFadeUpBrief;
        animation-duration: 0.6s;
        animation-timing-function: ease-out;
        animation-delay: 0.4s; 
        animation-fill-mode: forwards;
    }

    .animate-brief-intro {
        opacity: 0;
        transform: translateY(30px);
    }
    .animate-brief-intro.is-visible {
        animation-name: slideInFadeUpBrief; 
        animation-duration: 0.7s;
        animation-timing-function: ease-out;
        animation-delay: 0.6s;
        animation-fill-mode: forwards;
    }

    .animate-brief-bullet { 
        opacity: 0;
        transform: translateY(30px);
    }
    .animate-brief-bullet.is-visible {
        animation-name: slideInFadeUpBrief; 
        animation-duration: 0.5s;
        animation-timing-function: ease-out;
        animation-delay: 0.8s; /* Common delay for all bullets */
        animation-fill-mode: forwards;
    }

    .animate-brief-cta {
        opacity: 0;
        /* No initial transform for fadeInSimple */
    }
    .animate-brief-cta.is-visible {
        animation-name: fadeInSimple;
        animation-duration: 0.5s;
        animation-timing-function: ease-out;
        animation-delay: 1.2s; 
        animation-fill-mode: forwards;
    }

    @media (prefers-reduced-motion: reduce) {
        .animate-slide-in-left,
        .animate-brief-title1,
        .animate-brief-title2,
        .animate-brief-intro,
        .animate-brief-bullet,
        .animate-brief-cta {
            animation: none;
            opacity: 1;
        }
        .animate-slide-in-left { transform: translateX(0); }
        .animate-brief-title1,
        .animate-brief-title2,
        .animate-brief-intro,
        .animate-brief-bullet { transform: translateY(0); }
        /* .animate-brief-cta has no transform to reset */
    }
</style>